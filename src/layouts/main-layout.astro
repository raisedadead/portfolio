---
import { WaveBackground } from '@/components/background';
import { Footer } from '@/components/layout/footer';
import { Nav } from '@/components/layout/nav';
import { ScrollButton } from '@/components/scroll-button';
import Container from '@/components/ui/container';
import { cn } from '@/lib/utils';
import BaseLayout from './base-layout.astro';

export interface Props {
  pageTitle?: string;
  pageDescription?: string;
  pageUrl?: string;
  pageImage?: string;
  setCanonicalBlogBaseURL?: boolean;
  blogSlug?: string;
  showHomeButton?: boolean;
  variant?: 'main' | 'prose' | 'legal';
}

const { showHomeButton = true, variant = 'main', ...baseProps } = Astro.props;

// Map variant to container size for consistent widths
const containerSize = variant === 'legal' ? 'full' : 'full';
---

<BaseLayout {...baseProps} showHomeButton={showHomeButton}>
  <div class={cn('container')}>
    <div class='fixed inset-0 -z-10'>
      <WaveBackground client:idle />
    </div>
    <Container size={containerSize} className='my-2 py-8'>
      <main>
        <Nav className='z-20 my-2 max-h-none pt-2' showHomeButton={showHomeButton} client:idle />
        <div class='px-3 pt-20 pb-5 sm:px-5'>
          {
            variant === 'legal' ? (
              <div
                class={cn(
                  'prose prose-sm max-w-none p-8',
                  'bg-white',
                  'prose-p:text-gray-700',
                  'prose-p:my-2 prose-p:leading-relaxed',
                  'prose-strong:text-gray-900',
                  'prose-headings:font-semibold',
                  'prose-headings:text-gray-900',
                  'prose-ul:list-none',
                  'prose-li:text-gray-800',
                  'prose-a:text-blue-600',
                  'shadow-[6px_6px_0px_var(--color-black)]',
                  'border-2 border-black',
                  'prose-a:no-underline prose-a:hover:underline'
                )}
              >
                <slot />
              </div>
            ) : variant === 'main' ? (
              <div class='mx-auto'>
                <slot />
              </div>
            ) : (
              <slot />
            )
          }
        </div>
        <Footer isDefault={true} className='p-2' />
        <ScrollButton className='fixed right-4 bottom-4 z-20' client:visible />
      </main>
    </Container>
  </div>
</BaseLayout>
