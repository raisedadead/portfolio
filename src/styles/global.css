@import 'tailwindcss';

@plugin '@tailwindcss/typography';
@plugin '@tailwindcss/forms';
@plugin 'tailwindcss-animate';

/* Font Face Definitions - Performance Optimized */
/* Critical Fonts (preloaded) - Swapped Configuration */
@font-face {
  font-family: 'Inter';
  src: url('/fonts/inter/inter-700.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: optional;
}

@font-face {
  font-family: 'Space Grotesk';
  src: url('/fonts/space-grotesk/space-grotesk-400.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: optional;
}

/* Non-Critical Fonts (lazy loaded) */
@font-face {
  font-family: 'Inter';
  src: url('/fonts/inter/inter-400.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Inter';
  src: url('/fonts/inter/inter-600.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Space Grotesk';
  src: url('/fonts/space-grotesk/space-grotesk-600.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Space Grotesk';
  src: url('/fonts/space-grotesk/space-grotesk-700.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/jetbrains-mono/jetbrains-mono-400.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@custom-variant dark (&:is(.dark *));

@theme {
  /* Typography - Custom Fonts with System Fallbacks (Swapped) */
  --font-display: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
  --font-sans:
    'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif,
    'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  --font-mono: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', 'Courier New', Consolas, monospace;

  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-fade-in-out: fade-in-out 2s ease-in-out;
  --animate-slide-in-fade: slide-in-fade 2.5s ease-in-out;

  /* Container width tokens for semantic sizing */
  --width-container-sm: 48rem; /* 768px - narrow content (uses page) */
  --width-container-md: 56rem; /* 896px - standard content (index, about, blog posts) */
  --width-container-lg: 80rem; /* 1280px - wide layouts (blog index) */

  /* Brutalist shadow tokens - hard edges, black shadows */
  --shadow-brutal-sm: 2px 2px 0px rgba(0, 0, 0, 1);
  --shadow-brutal-md: 4px 4px 0px rgba(0, 0, 0, 1);
  --shadow-brutal-lg: 6px 6px 0px rgba(0, 0, 0, 1);
  --shadow-brutal-xl: 8px 8px 0px rgba(0, 0, 0, 1);

  /* Brand color semantic aliases */
  --color-brand-primary: var(--color-orange-200);
  --color-brand-hover: var(--color-orange-100);
  --color-brand-light: var(--color-orange-50);
  --color-brand-dark: var(--color-orange-900);

  /* Text color semantic aliases */
  --color-text-primary: var(--color-slate-800);
  --color-text-secondary: var(--color-slate-600);
  --color-text-muted: var(--color-slate-500);
  --color-text-inverse: white;

  /* Border radius tokens for consistency */
  --border-radius-brutal: 0.375rem;

  /* Spacing tokens for brutalist design */
  --spacing-brutal-sm: 0.5rem;
  --spacing-brutal-md: 1rem;
  --spacing-brutal-lg: 1.5rem;
  --spacing-brutal-xl: 2rem;

  /* Typography Scale - Mobile First with Fluid Sizing */
  --font-size-display-xl: clamp(2rem, 5vw, 4rem);
  --font-size-display-lg: clamp(1.75rem, 4vw, 3rem);
  --font-size-display-md: clamp(1.5rem, 3vw, 2.25rem);
  --font-size-display-sm: clamp(1.25rem, 2.5vw, 1.875rem);

  --font-size-body-lg: clamp(1.125rem, 1.5vw, 1.25rem);
  --font-size-body: 1rem;
  --font-size-body-sm: 0.875rem;
  --font-size-body-xs: 0.75rem;

  /* Font Weights - Semantic */
  --font-weight-display: 700;
  --font-weight-emphasis: 600;
  --font-weight-medium: 500;
  --font-weight-body: 400;

  /* Line Heights */
  --line-height-tight: 1.25;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.75;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }
  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
  @keyframes fade-in-out {
    0%,
    100% {
      opacity: 0;
    }
    10%,
    90% {
      opacity: 1;
    }
  }
  @keyframes slide-in-fade {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    20%,
    80% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
}

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
  }

  /* Apply display font to all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-display);
    font-weight: var(--font-weight-display);
    line-height: var(--line-height-tight);
    letter-spacing: -0.02em;
  }

  /* Apply monospace to code elements */
  code,
  pre,
  kbd,
  samp {
    font-family: var(--font-mono);
  }
}

/* Shiki code block styles */
.shiki-code-block {
  border-radius: 0.375rem;
  overflow-x: auto;
  padding: 1rem;
  margin: 1rem 0;
  font-size: 1rem;
  line-height: 1.5;
}

.shiki-code-block code {
  font-family: var(--font-mono);
}

/* Line numbers */
.shiki-line-numbers {
  padding-left: 0.5rem;
  counter-reset: line;
}

.shiki-line-numbers code {
  counter-reset: line;
}

.shiki-line-numbers code .line::before {
  counter-increment: line;
  content: counter(line);
  display: inline-block;
  width: 1rem;
  margin-right: 1.5rem;
  text-align: right;
  color: rgba(255, 255, 255, 0.3);
  user-select: none;
  transition: color 0.2s;
}

.shiki-line-numbers:hover code .line::before {
  color: rgba(255, 255, 255, 0.7);
}

/* Design System Consistency - Semantic utility classes for common patterns */

@utility brutalist-button {
  border: 2px solid var(--color-black);
  color: var(--color-text-primary);
  background-color: var(--color-brand-primary);
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
  text-decoration: none;
  cursor: pointer;
}

@utility brutalist-button-primary {
  border: 2px solid var(--color-black);
  color: var(--color-text-primary);
  background-color: var(--color-brand-primary);
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
  text-decoration: none;
  cursor: pointer;
}

@utility brutalist-button-secondary {
  border: 2px solid var(--color-black);
  color: var(--color-text-primary);
  background-color: var(--color-brand-light);
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
  text-decoration: none;
  cursor: pointer;
}

@utility brutalist-button-ghost {
  border: 2px solid var(--color-black);
  color: var(--color-text-primary);
  background-color: transparent;
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
  text-decoration: none;
  cursor: pointer;
}

@utility brutalist-card {
  border: 2px solid var(--color-black);
  background-color: white;
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
}

@utility brutalist-card-hover {
  border: 2px solid var(--color-black);
  background-color: white;
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
}

@utility brutalist-input {
  border: 2px solid var(--color-black);
  background-color: white;
  box-shadow: var(--shadow-brutal-md);
  transition: all 100ms;
}

@utility brutalist-transition {
  transition: all 100ms;
}

/* Additional styles for pseudo-classes */
.brutalist-button:hover:not(:disabled),
.brutalist-button-primary:hover:not(:disabled),
.brutalist-button-secondary:hover:not(:disabled),
.brutalist-button-ghost:hover:not(:disabled) {
  background-color: var(--color-orange-100);
  box-shadow: var(--shadow-brutal-lg);
}

.brutalist-button:focus-visible,
.brutalist-button-primary:focus-visible,
.brutalist-button-secondary:focus-visible,
.brutalist-button-ghost:focus-visible,
.brutalist-input:focus-visible,
.brutalist-focus:focus-visible {
  outline: 2px solid rgb(249 115 22 / 0.5);
  outline-offset: 2px;
}

.brutalist-button:disabled,
.brutalist-button-primary:disabled,
.brutalist-button-secondary:disabled,
.brutalist-button-ghost:disabled,
.brutalist-input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.brutalist-button:active,
.brutalist-button-primary:active,
.brutalist-button-secondary:active,
.brutalist-button-ghost:active {
  background-color: var(--color-black);
  color: white;
  box-shadow: none;
}

.brutalist-card-hover:hover {
  background-color: var(--color-orange-100);
  box-shadow: var(--shadow-brutal-lg);
}

.brutalist-input:hover:not(:disabled) {
  background-color: var(--color-orange-100);
}

/* Typography Utility Classes */
@utility text-display {
  font-family: var(--font-display);
  font-weight: var(--font-weight-display);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
}

@utility text-display-xl {
  font-family: var(--font-display);
  font-size: var(--font-size-display-xl);
  font-weight: var(--font-weight-display);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
}

@utility text-display-lg {
  font-family: var(--font-display);
  font-size: var(--font-size-display-lg);
  font-weight: var(--font-weight-display);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
}

@utility text-display-md {
  font-family: var(--font-display);
  font-size: var(--font-size-display-md);
  font-weight: var(--font-weight-display);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
}

@utility text-display-sm {
  font-family: var(--font-display);
  font-size: var(--font-size-display-sm);
  font-weight: var(--font-weight-display);
  line-height: var(--line-height-tight);
  letter-spacing: -0.02em;
}

/* Design System Consistency - Note: In Tailwind v4, @apply with custom classes in @layer components doesn't work.
   We apply utilities directly in components instead, as recommended by Tailwind team. */
